<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=390, height=844, initial-scale=1.0, user-scalable=no">
  <title>æ™ºè¯äº‘APP</title>
  <!-- å¼•å…¥Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- å¼•å…¥Font Awesomeå›¾æ ‡ -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- é…ç½®Tailwindè‡ªå®šä¹‰ä¸»é¢˜ -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4CAF50', // ä¸»è‰²è°ƒ-ç»¿è‰²ï¼ˆåŒ»ç–—å¥åº·ï¼‰
            secondary: '#E8F5E9', // è¾…åŠ©è‰²-æµ…ç»¿
            dark: '#2E7D32', // æ·±ç»¿
            gray: {
              light: '#F5F5F5',
              medium: '#E0E0E0',
              dark: '#757575'
            },
            warning: '#FF9800',
            danger: '#F44336',
            normal: '#4CAF50',
            abnormal: '#F44336'
          },
          fontFamily: {
            sans: ['PingFang SC', 'Helvetica Neue', 'Arial', 'sans-serif']
          },
          // å›ºå®šåä¸ºæ‰‹æœºå°ºå¯¸
          screens: {
            'huawei': '390px',
          }
        }
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .input-focus {
        @apply focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none;
      }
      .btn-primary {
        @apply bg-primary text-white py-3 rounded-lg font-medium transition-all hover:bg-dark active:scale-95;
      }
      .nav-item {
        @apply flex flex-col items-center justify-center text-gray-dark transition-colors;
      }
      .nav-item.active {
        @apply text-primary;
      }
      .card-shadow {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }
      .nav-active {
        @apply text-primary;
      }
      .page-transition {
        @apply transition-all duration-300 ease-in-out;
      }
      .report-table {
        @apply w-full border-collapse text-sm;
      }
      .report-th {
        @apply border border-gray-200 p-2 bg-gray-50 text-left text-gray-700 font-medium;
      }
      .report-td {
        @apply border border-gray-200 p-2 text-gray-800;
      }
    }
    
    /* å…¨å±€æ ·å¼ - å›ºå®šåä¸ºæ‰‹æœºå°ºå¯¸ï¼Œæ˜¾ç¤ºæ»šåŠ¨æ¡ */
    body {
      width: 390px;
      height: 844px;
      margin: 0 auto;
      position: relative;
      overflow: hidden;
      background-color: #f9f9f9; /* ç»Ÿä¸€èƒŒæ™¯è‰²ï¼Œé¿å…ç™½æ¡† */
    }
    
    /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */
    ::-webkit-scrollbar {
      width: 4px;
      height: 4px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 2px;
    }
    ::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 2px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }
    
    /* é¡µé¢å®¹å™¨ç»Ÿä¸€å°ºå¯¸ */
    #login-page, #register-page {
      width: 390px;
      height: 844px;
      position: absolute;
      top: 0;
      left: 0;
      overflow-y: auto;
      background-color: #f9f9f9; /* åŒ¹é…bodyèƒŒæ™¯ */
    }
    
    /* ä¸»åº”ç”¨å®¹å™¨ - å…è®¸æ»šåŠ¨ */
    #app-main {
      width: 390px;
      height: 844px;
      position: absolute;
      top: 0;
      left: 0;
      display: flex;
      flex-direction: column;
      background-color: #f9f9f9; /* åŒ¹é…bodyèƒŒæ™¯ */
    }
    
    /* ä¸»è¦å†…å®¹åŒºåŸŸ - å…è®¸æ»šåŠ¨å¹¶æ˜¾ç¤ºæ»šåŠ¨æ¡ */
    main {
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
      padding: 16px;
      background-color: #f9f9f9;
    }
    
    /* ä¿®å¤ï¼šæŠ¥å‘Šè¯¦æƒ…å¼¹çª—æ ·å¼ - å…³é”®ä¿®æ”¹ */
    #report-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 100;
      display: none; /* æ”¹ä¸ºdisplay:noneï¼Œå½»åº•éšè— */
      align-items: flex-start;
      justify-content: center;
      padding: 20px 10px; /* ä¼˜åŒ–å†…è¾¹è· */
      overflow-y: auto;
    }
    #report-modal.show {
      display: flex; /* æ˜¾ç¤ºæ—¶æ‰ç”¨flex */
    }
    .report-modal-content {
      width: 100%;
      max-width: 350px; /* æ”¹ä¸ºmax-widthé€‚é… */
      max-height: calc(100vh - 40px); /* é€‚é…è§†å£é«˜åº¦ */
      background-color: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      overflow-y: auto;
      margin: 0 auto; /* å±…ä¸­ */
    }
    .modal-close {
      position: sticky;
      top: 0;
      margin: 0 0 15px auto; /* è°ƒæ•´margin */
      display: block;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background-color: #f5f5f5;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      padding: 0;
    }
    .modal-close i {
      color: #666;
      font-size: 16px;
    }
    .modal-close:hover {
      background-color: #e0e0e0;
    }

    /* ä¸Šä¼ æŠ¥å‘Šé¡µé¢æ ·å¼ */
    .upload-card {
      background-color: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      margin-bottom: 16px;
    }
  </style>
</head>
<body class="bg-neutral min-h-screen font-sans text-gray-800">
  <!-- ç™»å½•é¡µé¢ - åˆå§‹æ˜¾ç¤º -->
  <div id="login-page" class="page-transition min-h-screen flex flex-col items-center justify-center px-4 py-8">
    <div class="w-full max-w-md bg-white rounded-xl p-6 card-shadow">
      <div class="text-center mb-8">
        <i class="fa fa-medkit text-5xl text-primary mb-4"></i>
        <h1 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-gray-800">æ™ºè¯äº‘</h1>
        <p class="text-gray-500">æ™ºèƒ½ç”¨è¯ç®¡ç†ï¼Œå®ˆæŠ¤æ‚¨çš„å¥åº·</p>
      </div>
      
      <form id="login-form" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1" for="login-username">ç”¨æˆ·å</label>
          <input type="text" id="login-username" 
                 class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                 placeholder="è¯·è¾“å…¥ç”¨æˆ·å" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1" for="login-password">å¯†ç </label>
          <input type="password" id="login-password" 
                 class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                 placeholder="è¯·è¾“å…¥å¯†ç " required>
        </div>
        
        <div class="flex items-center justify-between text-sm">
          <label class="flex items-center">
            <input type="checkbox" class="h-4 w-4 text-primary rounded border-gray-300 focus:ring-primary">
            <span class="ml-2 text-gray-600">è®°ä½æˆ‘</span>
          </label>
          <a href="#" class="text-primary hover:text-primary/80">å¿˜è®°å¯†ç ï¼Ÿ</a>
        </div>
        
        <button type="submit" 
                class="w-full bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors font-medium">
          ç™»å½•
        </button>
        
        <div class="text-center text-sm text-gray-600 mt-4">
          è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ 
          <a href="#" id="to-register" class="text-primary font-medium hover:text-primary/80">ç«‹å³æ³¨å†Œ</a>
        </div>
      </form>
    </div>
  </div>

  <!-- æ³¨å†Œé¡µé¢ - åˆå§‹éšè— -->
  <div id="register-page" class="page-transition min-h-screen flex flex-col items-center justify-center px-4 py-8" style="display: none;">
    <div class="w-full max-w-md bg-white rounded-xl p-6 card-shadow">
      <div class="text-center mb-8">
        <i class="fa fa-user-plus text-5xl text-primary mb-4"></i>
        <h1 class="text-[clamp(1.5rem,3vw,2rem)] font-bold text-gray-800">è´¦å·æ³¨å†Œ</h1>
        <p class="text-gray-500">åˆ›å»ºæ‚¨çš„æ™ºè¯äº‘è´¦å·</p>
      </div>
      
      <form id="register-form" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1" for="reg-username">ç”¨æˆ·å</label>
          <input type="text" id="reg-username" 
                 class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                 placeholder="è¯·è®¾ç½®ç”¨æˆ·å" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1" for="reg-phone">æ‰‹æœºå·ç </label>
          <input type="tel" id="reg-phone" 
                 class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                 placeholder="è¯·è¾“å…¥æ‰‹æœºå·" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1" for="reg-password">å¯†ç </label>
          <input type="password" id="reg-password" 
                 class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                 placeholder="è¯·è®¾ç½®å¯†ç ï¼ˆ6-16ä½ï¼‰" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1" for="reg-confirm">ç¡®è®¤å¯†ç </label>
          <input type="password" id="reg-confirm" 
                 class="w-full px-4 py-2 border border-gray-300 rounded-lg input-focus"
                 placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç " required>
        </div>
        
        <div class="flex items-center text-sm">
          <input type="checkbox" id="agree-terms" class="h-4 w-4 text-primary rounded border-gray-300 focus:ring-primary" required>
          <label for="agree-terms" class="ml-2 text-gray-600">
            æˆ‘å·²é˜…è¯»å¹¶åŒæ„<a href="#" class="text-primary">ã€Šç”¨æˆ·åè®®ã€‹</a>å’Œ<a href="#" class="text-primary">ã€Šéšç§æ”¿ç­–ã€‹</a>
          </label>
        </div>
        
        <button type="submit" 
                class="w-full bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors font-medium">
          æ³¨å†Œè´¦å·
        </button>
        
        <div class="text-center text-sm text-gray-600 mt-4">
          å·²æœ‰è´¦å·ï¼Ÿ 
          <a href="#" id="to-login" class="text-primary font-medium hover:text-primary/80">ç«‹å³ç™»å½•</a>
        </div>
      </form>
    </div>
  </div>

  <!-- ä¸»åº”ç”¨ç•Œé¢ - åˆå§‹éšè— -->
  <div id="app-main" class="page-transition" style="display: none;">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="bg-white shadow-sm px-4 py-3 border-b border-gray-200 z-10">
      <h1 class="text-xl font-bold text-gray-800" id="page-title">ä»Šæ—¥ç”¨è¯æé†’</h1>
    </header>
    
    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="flex-1 overflow-auto bg-neutral p-4">
      <!-- é¦–é¡µ - ç”¨è¯æé†’ -->
      <section id="home-page" class="space-y-4">
        <div class="bg-white rounded-lg p-4 card-shadow">
          <div class="flex items-center justify-between mb-3">
            <h2 class="font-bold text-lg text-gray-800">ä»Šæ—¥ç”¨è¯æ¸…å•</h2>
            <span class="text-sm bg-primary/10 text-primary px-2 py-1 rounded-full">2025-12-15</span>
          </div>
          
          <!-- ç”¨è¯æé†’åˆ—è¡¨ -->
          <div class="space-y-3">
            <div class="border-l-4 border-primary pl-3 py-2 bg-primary/5 rounded-r-lg">
              <div class="flex justify-between items-start">
                <div>
                  <h3 class="font-medium">å¸ƒæ´›èŠ¬ç¼“é‡Šèƒ¶å›Š</h3>
                  <p class="text-sm text-gray-500">è§£çƒ­é•‡ç—› Â· æ¯ç²’0.4g</p>
                </div>
                <span class="text-sm bg-warning/10 text-warning px-2 py-0.5 rounded">å³å°†æœç”¨</span>
              </div>
              <div class="flex items-center mt-2 text-sm text-gray-600">
                <i class="fa fa-clock-o mr-1"></i>
                <span>æœç”¨æ—¶é—´ï¼š08:00ã€18:00</span>
                <span class="mx-3">|</span>
                <i class="fa fa-medkit mr-1"></i>
                <span>ç”¨é‡ï¼š1ç²’/æ¬¡ï¼Œæ¯æ—¥2æ¬¡</span>
              </div>
            </div>
            
            <div class="border-l-4 border-secondary pl-3 py-2 bg-secondary/5 rounded-r-lg">
              <div class="flex justify-between items-start">
                <div>
                  <h3 class="font-medium">å¤æ–¹ç”˜è‰ç‰‡</h3>
                  <p class="text-sm text-gray-500">é•‡å’³ç¥›ç—° Â· æ¯ç‰‡0.2g</p>
                </div>
                <span class="text-sm bg-green-100 text-green-600 px-2 py-0.5 rounded">å·²æœç”¨</span>
              </div>
              <div class="flex items-center mt-2 text-sm text-gray-600">
                <i class="fa fa-clock-o mr-1"></i>
                <span>æœç”¨æ—¶é—´ï¼š06:30</span>
                <span class="mx-3">|</span>
                <i class="fa fa-medkit mr-1"></i>
                <span>ç”¨é‡ï¼š3ç‰‡/æ¬¡ï¼Œæ¯æ—¥3æ¬¡</span>
              </div>
            </div>
            
            <div class="border-l-4 border-gray-300 pl-3 py-2 bg-gray-50 rounded-r-lg">
              <div class="flex justify-between items-start">
                <div>
                  <h3 class="font-medium">ç»´ç”Ÿç´ Cç‰‡</h3>
                  <p class="text-sm text-gray-500">è¡¥å……ç»´ç”Ÿç´  Â· æ¯ç‰‡0.1g</p>
                </div>
                <span class="text-sm bg-gray-100 text-gray-600 px-2 py-0.5 rounded">æœªåˆ°æ—¶é—´</span>
              </div>
              <div class="flex items-center mt-2 text-sm text-gray-600">
                <i class="fa fa-clock-o mr-1"></i>
                <span>æœç”¨æ—¶é—´ï¼š12:00</span>
                <span class="mx-3">|</span>
                <i class="fa fa-medkit mr-1"></i>
                <span>ç”¨é‡ï¼š1ç‰‡/æ¬¡ï¼Œæ¯æ—¥1æ¬¡</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- ç”¨è¯å°è´´å£« -->
        <div class="bg-white rounded-lg p-4 card-shadow">
          <h2 class="font-bold text-lg text-gray-800 mb-3">ç”¨è¯å°è´´å£«</h2>
          <ul class="space-y-2 text-gray-700">
            <li class="flex items-start">
              <i class="fa fa-info-circle text-primary mt-1 mr-2"></i>
              <span>å¸ƒæ´›èŠ¬å»ºè®®é¥­åæœç”¨ï¼Œå‡å°‘èƒƒè‚ é“åˆºæ¿€</span>
            </li>
            <li class="flex items-start">
              <i class="fa fa-info-circle text-primary mt-1 mr-2"></i>
              <span>æœç”¨è¯ç‰©æœŸé—´è¯·é¿å…é¥®é…’</span>
            </li>
            <li class="flex items-start">
              <i class="fa fa-info-circle text-primary mt-1 mr-2"></i>
              <span>å¦‚å‡ºç°ä¸é€‚ç—‡çŠ¶ï¼Œè¯·ç«‹å³åœè¯å¹¶å’¨è¯¢åŒ»ç”Ÿ</span>
            </li>
          </ul>
        </div>
        
        <!-- å¸¸è§„ç”¨è¯çŸ¥è¯†ç§‘æ™® -->
        <div class="bg-white rounded-lg p-4 card-shadow">
          <h2 class="font-bold text-lg text-gray-800 mb-3 flex items-center">
            <i class="fa fa-book-medical text-primary mr-2"></i>
            å¸¸è§„ç”¨è¯çŸ¥è¯†ç§‘æ™®
          </h2>
          
          <!-- ç”¨è¯åŸºæœ¬åŸåˆ™ -->
          <div class="mb-4">
            <h3 class="font-medium text-gray-800 mb-2">ä¸€ã€ç”¨è¯åŸºæœ¬åŸåˆ™</h3>
            <ul class="space-y-2 text-gray-700 pl-4">
              <li class="flex items-start">
                <i class="fa fa-check-circle text-primary mt-1 mr-2"></i>
                <span><strong>éµåŒ»å˜±ç”¨è¯ï¼š</strong>ä¸¥æ ¼æŒ‰ç…§åŒ»ç”Ÿçš„å¤„æ–¹å’Œè¯´æ˜ä¹¦æœç”¨ï¼Œä¸æ“…è‡ªå¢å‡å‰‚é‡æˆ–åœè¯</span>
              </li>
              <li class="flex items-start">
                <i class="fa fa-check-circle text-primary mt-1 mr-2"></i>
                <span><strong>æŒ‰æ—¶æœè¯ï¼š</strong>å›ºå®šæ—¶é—´æœè¯ï¼Œä¿è¯è¡€è¯æµ“åº¦ç¨³å®šï¼Œæé«˜ç–—æ•ˆ</span>
              </li>
              <li class="flex items-start">
                <i class="fa fa-check-circle text-primary mt-1 mr-2"></i>
                <span><strong>è§„èŒƒå‚¨å­˜ï¼š</strong>è¯å“éœ€æŒ‰è¦æ±‚å‚¨å­˜ï¼Œé¿å…é˜³å…‰ç›´å°„ã€é«˜æ¸©æ½®æ¹¿ç¯å¢ƒ</span>
              </li>
              <li class="flex items-start">
                <i class="fa fa-check-circle text-primary mt-1 mr-2"></i>
                <span><strong>æ ¸å¯¹ä¿¡æ¯ï¼š</strong>ç”¨è¯å‰æ ¸å¯¹è¯å“åç§°ã€æœ‰æ•ˆæœŸã€ç”¨æ³•ç”¨é‡</span>
              </li>
            </ul>
          </div>
          
          <!-- ä¸åŒå‰‚å‹æœç”¨æ–¹æ³• -->
          <div class="mb-4">
            <h3 class="font-medium text-gray-800 mb-2">äºŒã€ä¸åŒå‰‚å‹æœç”¨æ–¹æ³•</h3>
            <div class="space-y-3 text-gray-700">
              <div class="bg-gray-50 p-3 rounded-lg">
                <p class="font-medium">ğŸ’Š å£æœå›ºä½“åˆ¶å‰‚ï¼ˆç‰‡å‰‚ã€èƒ¶å›Šï¼‰</p>
                <p class="text-sm mt-1">ç”¨æ¸©æ°´é€æœï¼Œä¸å®œç”¨èŒ¶æ°´ã€å’–å•¡ã€ç‰›å¥¶ç­‰é€æœï¼›èƒ¶å›Šä¸å¯æ‰“å¼€æœç”¨ï¼›è‚ æº¶ç‰‡ä¸å¯åš¼ç¢</p>
              </div>
              <div class="bg-gray-50 p-3 rounded-lg">
                <p class="font-medium">ğŸ’§ å£æœæ¶²ä½“åˆ¶å‰‚ï¼ˆç³–æµ†ã€æ··æ‚¬æ¶²ï¼‰</p>
                <p class="text-sm mt-1">æœç”¨å‰æ‘‡åŒ€ï¼›ä½¿ç”¨é‡æ¯å‡†ç¡®é‡å–ï¼›æ­¢å’³ç³–æµ†æœç”¨å30åˆ†é’Ÿå†…ä¸å®œå–æ°´</p>
              </div>
              <div class="bg-gray-50 p-3 rounded-lg">
                <p class="font-medium">ğŸŒ¡ï¸ å¤–ç”¨åˆ¶å‰‚ï¼ˆè½¯è†ã€å–·é›¾ï¼‰</p>
                <p class="text-sm mt-1">å¤–ç”¨è¯å“åˆ‡å‹¿å£æœï¼›æ¶‚æŠ¹å‰æ¸…æ´æ‚£å¤„ï¼›é¿å…æ¥è§¦çœ¼ç›å’Œé»è†œ</p>
              </div>
            </div>
          </div>
          
          <!-- ç‰¹æ®Šäººç¾¤ç”¨è¯ -->
          <div class="mb-4">
            <h3 class="font-medium text-gray-800 mb-2">ä¸‰ã€ç‰¹æ®Šäººç¾¤ç”¨è¯æ³¨æ„</h3>
            <div class="grid grid-cols-2 gap-3">
              <div class="bg-primary/5 p-3 rounded-lg">
                <p class="font-medium text-sm">ğŸ‘¶ å„¿ç«¥ç”¨è¯</p>
                <p class="text-xs mt-1 text-gray-700">æŒ‰å¹´é¾„/ä½“é‡è®¡ç®—å‰‚é‡ï¼›é€‰ç”¨å„¿ç«¥ä¸“ç”¨å‰‚å‹ï¼›ç›‘æŠ¤äººç›‘ç£æœç”¨</p>
              </div>
              <div class="bg-primary/5 p-3 rounded-lg">
                <p class="font-medium text-sm">ğŸ‘µ è€å¹´äººç”¨è¯</p>
                <p class="text-xs mt-1 text-gray-700">å‰‚é‡é…Œæƒ…å‡å°‘ï¼›æ³¨æ„è¯ç‰©ç›¸äº’ä½œç”¨ï¼›å®šæœŸå¤æŸ¥è‚è‚¾åŠŸèƒ½</p>
              </div>
              <div class="bg-primary/5 p-3 rounded-lg">
                <p class="font-medium text-sm">ğŸ¤° å­•å¦‡ç”¨è¯</p>
                <p class="text-xs mt-1 text-gray-700">é¿å…è‡ªè¡Œç”¨è¯ï¼›éµåŒ»å˜±é€‰æ‹©å®‰å…¨ç­‰çº§é«˜çš„è¯ç‰©ï¼›æƒè¡¡åˆ©å¼Šä½¿ç”¨</p>
              </div>
              <div class="bg-primary/5 p-3 rounded-lg">
                <p class="font-medium text-sm">ğŸ’¼ è‚è‚¾åŠŸèƒ½ä¸å…¨è€…</p>
                <p class="text-xs mt-1 text-gray-700">éœ€è°ƒæ•´å‰‚é‡ï¼›é¿å…ä½¿ç”¨è‚è‚¾æ¯’æ€§è¯ç‰©ï¼›å®šæœŸç›‘æµ‹è‚è‚¾åŠŸèƒ½</p>
              </div>
            </div>
          </div>
          
          <!-- ç”¨è¯å®‰å…¨è­¦ç¤º -->
          <div>
            <h3 class="font-medium text-gray-800 mb-2">å››ã€ç”¨è¯å®‰å…¨è­¦ç¤º</h3>
            <div class="bg-warning/10 border-l-4 border-warning p-3 rounded-r-lg">
              <ul class="space-y-1 text-gray-700 text-sm">
                <li>â€¢ ä¸å¯éšæ„è”ç”¨å¤šç§æ„Ÿå†’è¯ï¼Œé¿å…æˆåˆ†å åŠ å¯¼è‡´è¿‡é‡</li>
                <li>â€¢ æŠ—ç”Ÿç´ ä¸å¯æ»¥ç”¨ï¼Œç—…æ¯’æ€§æ„Ÿå†’æ— éœ€ä½¿ç”¨æŠ—ç”Ÿç´ </li>
                <li>â€¢ è¿‡æœŸè¯å“è¯·å‹¿ä½¿ç”¨ï¼Œè¯æ•ˆä¸‹é™ä¸”å¯èƒ½äº§ç”Ÿæœ‰å®³ç‰©è´¨</li>
                <li>â€¢ æœè¯æœŸé—´å¦‚å‡ºç°ä¸¥é‡ä¸è‰¯ååº”ï¼Œç«‹å³åœè¯å¹¶å°±åŒ»</li>
                <li>â€¢ å¤„æ–¹è¯éœ€å‡­åŒ»å¸ˆå¤„æ–¹è´­ä¹°å’Œä½¿ç”¨ï¼Œä¸å¯è‡ªè¡Œè°ƒæ•´</li>
              </ul>
            </div>
          </div>
        </div>
        
        <!-- ç”¨è¯è®°å½•ç»Ÿè®¡ -->
        <div class="bg-white rounded-lg p-4 card-shadow">
          <h2 class="font-bold text-lg text-gray-800 mb-3 flex items-center">
            <i class="fa fa-bar-chart text-primary mr-2"></i>
            è¿‘æœŸç”¨è¯ç»Ÿè®¡
          </h2>
          <div class="grid grid-cols-2 gap-4">
            <div class="bg-gray-50 p-4 rounded-lg text-center">
              <p class="text-3xl font-bold text-primary">92%</p>
              <p class="text-sm text-gray-600 mt-1">æœ¬æœˆæŒ‰æ—¶æœè¯ç‡</p>
              <div class="mt-2 h-2 bg-gray-200 rounded-full overflow-hidden">
                <div class="h-full bg-primary rounded-full" style="width: 92%"></div>
              </div>
            </div>
            <div class="bg-gray-50 p-4 rounded-lg text-center">
              <p class="text-3xl font-bold text-primary">8</p>
              <p class="text-sm text-gray-600 mt-1">æœ¬æœˆæœç”¨è¯å“ç§ç±»</p>
              <div class="mt-2 flex justify-center space-x-1">
                <span class="w-3 h-3 rounded-full bg-primary"></span>
                <span class="w-3 h-3 rounded-full bg-secondary"></span>
                <span class="w-3 h-3 rounded-full bg-warning"></span>
                <span class="w-3 h-3 rounded-full bg-gray-400"></span>
                <span class="w-3 h-3 rounded-full bg-primary/70"></span>
                <span class="w-3 h-3 rounded-full bg-secondary/70"></span>
                <span class="w-3 h-3 rounded-full bg-warning/70"></span>
                <span class="w-3 h-3 rounded-full bg-gray-400/70"></span>
              </div>
            </div>
          </div>
          <div class="mt-4 text-sm text-gray-600">
            <p class="flex items-center">
              <i class="fa fa-calendar-check-o text-primary mr-2"></i>
              æœ€è¿‘ä¸€æ¬¡æœè¯ï¼š2025-12-15 06:30ï¼ˆå¤æ–¹ç”˜è‰ç‰‡ï¼‰
            </p>
            <p class="flex items-center mt-1">
              <i class="fa fa-calendar-times-o text-warning mr-2"></i>
              æœªæŒ‰æ—¶æœè¯æ¬¡æ•°ï¼šæœ¬æœˆ2æ¬¡ï¼ˆå¸ƒæ´›èŠ¬ã€ç»´ç”Ÿç´ Cï¼‰
            </p>
          </div>
        </div>
      </section>

      <!-- AIè¯å“åŠ©æ‰‹é¡µé¢ -->
      <section id="ai-assistant-page" class="hidden h-full flex flex-col">
        <div class="bg-white rounded-lg shadow-sm mb-4 flex-1 flex flex-col h-full">
          <div class="p-3 border-b border-gray-200">
            <h2 class="font-medium text-gray-800">AIè¯å“åŠ©æ‰‹</h2>
            <p class="text-sm text-gray-500">ä¸“ä¸šè§£ç­”è¯å“ç›¸å…³é—®é¢˜</p>
          </div>
          
          <!-- èŠå¤©åŒºåŸŸ -->
          <div id="chat-messages" class="flex-1 p-4 overflow-auto space-y-4">
            <div class="flex items-start">
              <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white mr-2">
                <i class="fa fa-robot"></i>
              </div>
              <div class="bg-gray-100 rounded-lg px-4 py-2 max-w-[80%]">
                <p class="text-gray-800">æ‚¨å¥½ï¼æˆ‘æ˜¯AIè¯å“åŠ©æ‰‹ï¼Œè¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„ï¼Ÿ</p>
              </div>
            </div>
          </div>
          
          <!-- è¾“å…¥åŒºåŸŸ -->
          <div class="p-3 border-t border-gray-200">
            <form id="chat-form" class="flex items-center space-x-2">
              <input type="text" id="chat-input" 
                     class="flex-1 px-3 py-2 border border-gray-300 rounded-lg input-focus"
                     placeholder="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ï¼ˆå¦‚ï¼šå¸ƒæ´›èŠ¬çš„ç”¨æ³•ç”¨é‡ï¼‰" required>
              <button type="submit" class="bg-primary text-white p-2 rounded-lg hover:bg-primary/90 transition-colors">
                <i class="fa fa-paper-plane"></i>
              </button>
            </form>
          </div>
        </div>
      </section>

      <!-- èº«ä½“æŠ¥å‘Šé¡µé¢ -->
      <section id="report-page" class="hidden">
        <div class="bg-white rounded-lg p-4 card-shadow mb-4">
          <div class="flex items-center justify-between mb-3">
            <h2 class="font-bold text-lg text-gray-800">èº«ä½“æŠ¥å‘Šåˆ—è¡¨</h2>
            <!-- åŒæ­¥æŠ¥å‘ŠæŒ‰é’® -->
            <button id="sync-report-btn" class="text-primary text-sm flex items-center hover:text-primary/80">
              <i class="fa fa-refresh mr-1"></i> åŒæ­¥æŠ¥å‘Š
            </button>
          </div>
          
          <div class="space-y-3">
            <div class="border border-gray-200 rounded-lg p-3 hover:border-primary transition-colors">
              <div class="flex justify-between items-start">
                <div>
                  <h3 class="font-medium">2025å¹´åº¦ä½“æ£€æŠ¥å‘Š</h3>
                  <p class="text-sm text-gray-500">ä½“æ£€ä¸­å¿ƒï¼šå¸‚ç¬¬ä¸€äººæ°‘åŒ»é™¢</p>
                </div>
                <span class="text-sm text-gray-500">2025-11-20</span>
              </div>
              <div class="mt-2 flex items-center text-sm">
                <button class="view-report text-primary mr-4 flex items-center hover:text-primary/80" data-report-type="annual">
                  <i class="fa fa-eye mr-1"></i> æŸ¥çœ‹
                </button>
                <button class="text-gray-600 flex items-center hover:text-gray-800">
                  <i class="fa fa-download mr-1"></i> ä¸‹è½½
                </button>
              </div>
            </div>
            
            <div class="border border-gray-200 rounded-lg p-3 hover:border-primary transition-colors">
              <div class="flex justify-between items-start">
                <div>
                  <h3 class="font-medium">è¡€å¸¸è§„æ£€æŸ¥æŠ¥å‘Š</h3>
                  <p class="text-sm text-gray-500">æ£€æŸ¥åŒ»é™¢ï¼šå¸‚ä¸­å¿ƒåŒ»é™¢</p>
                </div>
                <span class="text-sm text-gray-500">2025-10-15</span>
              </div>
              <div class="mt-2 flex items-center text-sm">
                <button class="view-report text-primary mr-4 flex items-center hover:text-primary/80" data-report-type="blood">
                  <i class="fa fa-eye mr-1"></i> æŸ¥çœ‹
                </button>
                <button class="text-gray-600 flex items-center hover:text-gray-800">
                  <i class="fa fa-download mr-1"></i> ä¸‹è½½
                </button>
              </div>
            </div>
            
            <div class="border border-gray-200 rounded-lg p-3 hover:border-primary transition-colors">
              <div class="flex justify-between items-start">
                <div>
                  <h3 class="font-medium">è‚åŠŸèƒ½æ£€æŸ¥æŠ¥å‘Š</h3>
                  <p class="text-sm text-gray-500">æ£€æŸ¥åŒ»é™¢ï¼šå¸‚ä¸­åŒ»é™¢</p>
                </div>
                <span class="text-sm text-gray-500">2025-09-05</span>
              </div>
              <div class="mt-2 flex items-center text-sm">
                <button class="view-report text-primary mr-4 flex items-center hover:text-primary/80" data-report-type="liver">
                  <i class="fa fa-eye mr-1"></i> æŸ¥çœ‹
                </button>
                <button class="text-gray-600 flex items-center hover:text-gray-800">
                  <i class="fa fa-download mr-1"></i> ä¸‹è½½
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="bg-white rounded-lg p-4 card-shadow">
          <h2 class="font-bold text-lg text-gray-800 mb-3">æŠ¥å‘Šè§£è¯»</h2>
          <div class="text-gray-700 space-y-2">
            <p>æ‚¨çš„å„é¡¹æ£€æŸ¥æŒ‡æ ‡åŸºæœ¬æ­£å¸¸ï¼Œä»…è¡€å¸¸è§„æ˜¾ç¤ºè½»å¾®è´«è¡€ï¼Œå»ºè®®ï¼š</p>
            <ul class="list-disc pl-5 space-y-1 text-sm">
              <li>æ—¥å¸¸é¥®é£Ÿå¢åŠ å«é“é£Ÿç‰©æ‘„å…¥ï¼ˆçº¢è‚‰ã€åŠ¨ç‰©è‚è„ã€è èœç­‰ï¼‰</li>
              <li>è¡¥å……ç»´ç”Ÿç´ Cä¿ƒè¿›é“å¸æ”¶</li>
              <li>3ä¸ªæœˆåå¤æŸ¥è¡€å¸¸è§„</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- ä¸Šä¼ æŠ¥å‘Šé¡µé¢ - åˆå§‹éšè— -->
      <section id="upload-report-page" class="hidden">
        <!-- é¡¶éƒ¨å¯¼èˆªæ ï¼ˆä»¿APPåŸç”Ÿè¿”å›+æ ‡é¢˜ï¼‰ -->
        <div class="fixed top-0 left-0 right-0 bg-white h-14 flex items-center px-4 border-b border-gray-200 z-20" style="width: 390px;">
          <button id="upload-back-btn" class="flex items-center mr-3">
            <i class="fa fa-chevron-left text-gray-800 text-lg"></i>
            <span class="text-gray-800 font-medium">è¿”å›</span>
          </button>
          <h1 class="text-lg font-medium text-gray-800">åŒæ­¥ä½“æ£€æŠ¥å‘Š</h1>
        </div>

        <!-- ä¸»ä½“å†…å®¹ï¼ˆé€‚é…é¡¶éƒ¨å¯¼èˆªé«˜åº¦ï¼‰ -->
        <div class="pt-14 pb-16 px-4">
          <!-- ä¸Šä¼ æ–¹å¼é€‰æ‹©ï¼ˆä»¿ä¸»æµAPPåˆ†æ®µå¼ï¼‰ -->
          <div class="bg-white rounded-lg p-4 card-shadow mb-4 mt-2">
            <h2 class="font-medium text-gray-800 mb-3">é€‰æ‹©ä¸Šä¼ æ–¹å¼</h2>
            <div class="grid grid-cols-2 gap-3">
              <!-- æ‹ç…§ä¸Šä¼  -->
              <div class="border border-gray-200 rounded-lg p-4 text-center hover:border-primary hover:bg-primary/5 transition-all cursor-pointer">
                <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2">
                  <i class="fa fa-camera text-primary text-xl"></i>
                </div>
                <p class="text-sm text-gray-800">æ‹ç…§ä¸Šä¼ </p>
                <p class="text-xs text-gray-500 mt-1">æ‹æ‘„çº¸è´¨æŠ¥å‘Š</p>
              </div>
              <!-- æ–‡ä»¶ä¸Šä¼  -->
              <div class="border border-primary bg-primary/5 rounded-lg p-4 text-center hover:bg-primary/10 transition-all cursor-pointer">
                <div class="w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-2">
                  <i class="fa fa-file-text-o text-primary text-xl"></i>
                </div>
                <p class="text-sm text-gray-800">æ–‡ä»¶ä¸Šä¼ </p>
                <p class="text-xs text-gray-500 mt-1">PDF/å›¾ç‰‡æ ¼å¼</p>
              </div>
            </div>
          </div>

          <!-- æ–‡ä»¶ä¸Šä¼ æ ¸å¿ƒåŒºåŸŸï¼ˆä»¿APPæ ·å¼ï¼‰ -->
          <div class="bg-white rounded-lg p-4 card-shadow mb-4">
            <h2 class="font-medium text-gray-800 mb-3 flex items-center">
              <i class="fa fa-cloud-upload text-primary mr-2"></i>
              ä¸Šä¼ æŠ¥å‘Šæ–‡ä»¶
            </h2>
            
            <!-- ä¸Šä¼ æç¤º -->
            <p class="text-xs text-gray-500 mb-3">æ”¯æŒPDFã€JPGã€PNGæ ¼å¼ï¼Œå•æ–‡ä»¶æœ€å¤§50MBï¼Œå¯å¤šé€‰</p>
            
            <!-- ä¸Šä¼ åŒºåŸŸï¼ˆä»¿APPæ‹–æ‹½+æŒ‰é’®ç»“åˆæ ·å¼ï¼‰ -->
            <div class="border-2 dashed border-gray-300 rounded-lg p-6 text-center mb-4 hover:border-primary transition-colors bg-gray-50/50" id="new-upload-area">
              <input type="file" id="new-file-upload" class="hidden" accept=".pdf,.jpg,.jpeg,.png" multiple>
              <i class="fa fa-file-o text-4xl text-gray-400 mb-2"></i>
              <p class="text-gray-600 mb-2">æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–</p>
              <!-- ç‹¬ç«‹ä¸Šä¼ æŒ‰é’® -->
              <button id="select-file-btn" class="bg-primary text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-dark transition-colors">
                <i class="fa fa-plus mr-1"></i> é€‰æ‹©æ–‡ä»¶
              </button>
            </div>
            
            <!-- æ–‡ä»¶åˆ—è¡¨ -->
            <div id="file-list" class="space-y-2 mb-4 hidden">
              <!-- æ–‡ä»¶é¡¹åŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <!-- æ‰¹é‡ä¸Šä¼ æŒ‰é’® -->
            <button id="batch-upload-btn" class="w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-dark transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
              <i class="fa fa-upload mr-1"></i> å¼€å§‹ä¸Šä¼ 
            </button>
          </div>
          
          <!-- æŠ¥å‘Šä¿¡æ¯å¡«å†™ -->
          <div class="bg-white rounded-lg p-4 card-shadow mb-4">
            <h2 class="font-medium text-gray-800 mb-3 flex items-center">
              <i class="fa fa-pencil text-primary mr-2"></i>
              æŠ¥å‘ŠåŸºæœ¬ä¿¡æ¯
            </h2>
            <div class="space-y-3">
              <div>
                <label class="block text-xs font-medium text-gray-700 mb-1">æŠ¥å‘Šç±»å‹ <span class="text-danger">*</span></label>
                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus text-sm">
                  <option value="">è¯·é€‰æ‹©æŠ¥å‘Šç±»å‹</option>
                  <option value="annual">å¹´åº¦ä½“æ£€æŠ¥å‘Š</option>
                  <option value="blood">è¡€å¸¸è§„æ£€æŸ¥æŠ¥å‘Š</option>
                  <option value="liver">è‚åŠŸèƒ½æ£€æŸ¥æŠ¥å‘Š</option>
                  <option value="urine">å°¿å¸¸è§„æ£€æŸ¥æŠ¥å‘Š</option>
                  <option value="other">å…¶ä»–æŠ¥å‘Š</option>
                </select>
              </div>
              
              <div>
                <label class="block text-xs font-medium text-gray-700 mb-1">æ£€æŸ¥æ—¥æœŸ <span class="text-danger">*</span></label>
                <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus text-sm">
              </div>
              
              <div>
                <label class="block text-xs font-medium text-gray-700 mb-1">æ£€æŸ¥æœºæ„ <span class="text-danger">*</span></label>
                <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus text-sm" placeholder="è¯·è¾“å…¥åŒ»é™¢/ä½“æ£€ä¸­å¿ƒåç§°">
              </div>
              
              <div>
                <label class="block text-xs font-medium text-gray-700 mb-1">å¤‡æ³¨ï¼ˆé€‰å¡«ï¼‰</label>
                <textarea class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus text-sm h-16" placeholder="è¯·è¾“å…¥æŠ¥å‘Šç›¸å…³å¤‡æ³¨ä¿¡æ¯"></textarea>
              </div>
            </div>
          </div>
          
          <!-- ä¸Šä¼ è¯´æ˜ -->
          <div class="bg-white rounded-lg p-4 card-shadow">
            <h3 class="font-medium text-gray-800 mb-2 flex items-center">
              <i class="fa fa-info-circle text-primary mr-2"></i>
              ä¸Šä¼ è¯´æ˜
            </h3>
            <ul class="text-sm text-gray-700 space-y-2 pl-6 list-disc">
              <li>ä¸Šä¼ çš„æŠ¥å‘Šå°†è¿›è¡ŒAIæ™ºèƒ½è§£è¯»ï¼Œç”Ÿæˆç»“æ„åŒ–æ•°æ®</li>
              <li>æ”¯æŒå¤šå¼ å›¾ç‰‡æ‹¼æ¥ä¸Šä¼ ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆå¹¶ä¸ºä¸€ä»½æŠ¥å‘Š</li>
              <li>æŠ¥å‘Šä¸Šä¼ åå°†åŠ å¯†å­˜å‚¨ï¼Œä»…æ‚¨æœ¬äººå¯æŸ¥çœ‹</li>
              <li>å¦‚éœ€åˆ é™¤å·²ä¸Šä¼ çš„æŠ¥å‘Šï¼Œå¯åœ¨æŠ¥å‘Šåˆ—è¡¨ä¸­æ“ä½œ</li>
            </ul>
          </div>
          
          <!-- æäº¤æŒ‰é’®ï¼ˆåº•éƒ¨å›ºå®šï¼‰ -->
          <div class="fixed bottom-0 left-0 right-0 bg-white p-4 border-t border-gray-200" style="width: 390px;">
            <button id="final-submit-btn" class="w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-dark transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
              ç¡®è®¤åŒæ­¥æŠ¥å‘Š
            </button>
          </div>
        </div>
      </section>

      <!-- ä¸ªäººä¸­å¿ƒé¡µé¢ -->
      <section id="profile-page" class="hidden">
        <div class="bg-white rounded-lg p-4 card-shadow mb-4">
          <div class="flex items-center mb-4">
            <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center text-primary text-2xl mr-4">
              <i class="fa fa-user"></i>
            </div>
            <div>
              <h2 class="font-bold text-xl text-gray-800" id="user-name">ç”¨æˆ·å</h2>
              <p class="text-sm text-gray-500" id="user-phone">æ‰‹æœºå·</p>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-3">
            <div class="bg-neutral rounded-lg p-3 text-center">
              <p class="text-2xl font-bold text-primary mb-1">3</p>
              <p class="text-sm text-gray-600">å½“å‰ç”¨è¯</p>
            </div>
            <div class="bg-neutral rounded-lg p-3 text-center">
              <p class="text-2xl font-bold text-secondary mb-1">8</p>
              <p class="text-sm text-gray-600">æ£€æŸ¥æŠ¥å‘Š</p>
            </div>
          </div>
        </div>
        
        <div class="bg-white rounded-lg p-4 card-shadow mb-4">
          <h2 class="font-bold text-lg text-gray-800 mb-3">è´¦æˆ·ç®¡ç†</h2>
          <div class="space-y-3">
            <a href="#" class="flex items-center justify-between p-2 hover:bg-neutral rounded-lg transition-colors">
              <div class="flex items-center">
                <i class="fa fa-key text-primary mr-3"></i>
                <span>ä¿®æ”¹å¯†ç </span>
              </div>
              <i class="fa fa-chevron-right text-gray-400"></i>
            </a>
            <a href="#" class="flex items-center justify-between p-2 hover:bg-neutral rounded-lg transition-colors">
              <div class="flex items-center">
                <i class="fa fa-bell text-primary mr-3"></i>
                <span>æ¶ˆæ¯é€šçŸ¥</span>
              </div>
              <i class="fa fa-chevron-right text-gray-400"></i>
            </a>
            <a href="#" class="flex items-center justify-between p-2 hover:bg-neutral rounded-lg transition-colors">
              <div class="flex items-center">
                <i class="fa fa-shield text-primary mr-3"></i>
                <span>éšç§è®¾ç½®</span>
              </div>
              <i class="fa fa-chevron-right text-gray-400"></i>
            </a>
          </div>
        </div>
        
        <div class="bg-white rounded-lg p-4 card-shadow">
          <h2 class="font-bold text-lg text-gray-800 mb-3">æ›´å¤šé€‰é¡¹</h2>
          <div class="space-y-3">
            <a href="#" class="flex items-center justify-between p-2 hover:bg-neutral rounded-lg transition-colors">
              <div class="flex items-center">
                <i class="fa fa-question-circle text-primary mr-3"></i>
                <span>å¸®åŠ©ä¸­å¿ƒ</span>
              </div>
              <i class="fa fa-chevron-right text-gray-400"></i>
            </a>
            <a href="#" class="flex items-center justify-between p-2 hover:bg-neutral rounded-lg transition-colors">
              <div class="flex items-center">
                <i class="fa fa-headphones text-primary mr-3"></i>
                <span>è”ç³»å®¢æœ</span>
              </div>
              <i class="fa fa-chevron-right text-gray-400"></i>
            </a>
            <button id="logout-btn" class="w-full flex items-center justify-between p-2 hover:bg-neutral rounded-lg transition-colors text-danger">
              <div class="flex items-center">
                <i class="fa fa-sign-out text-danger mr-3"></i>
                <span>é€€å‡ºç™»å½•</span>
              </div>
              <i class="fa fa-chevron-right text-gray-400"></i>
            </button>
          </div>
        </div>
      </section>
    </main>
    
    <!-- åº•éƒ¨å¯¼èˆªæ  -->
    <nav class="bg-white border-t border-gray-200 px-2 py-1 z-10">
      <div class="grid grid-cols-4 gap-1 h-full">
        <button id="nav-home" class="nav-active flex flex-col items-center justify-center py-2 text-sm">
          <i class="fa fa-home text-lg mb-1"></i>
          <span>é¦–é¡µ</span>
        </button>
        <button id="nav-ai" class="flex flex-col items-center justify-center py-2 text-sm text-gray-600">
          <i class="fa fa-comments text-lg mb-1"></i>
          <span>AIåŠ©æ‰‹</span>
        </button>
        <button id="nav-report" class="flex flex-col items-center justify-center py-2 text-sm text-gray-600">
          <i class="fa fa-file-text text-lg mb-1"></i>
          <span>èº«ä½“æŠ¥å‘Š</span>
        </button>
        <button id="nav-profile" class="flex flex-col items-center justify-center py-2 text-sm text-gray-600">
          <i class="fa fa-user text-lg mb-1"></i>
          <span>æˆ‘çš„</span>
        </button>
      </div>
    </nav>
  </div>

  <!-- æŠ¥å‘Šè¯¦æƒ…å¼¹çª— -->
  <div id="report-modal" class="report-modal">
    <div class="report-modal-content">
      <!-- å…³é—­æŒ‰é’® -->
      <button id="close-modal" class="modal-close">
        <i class="fa fa-times"></i>
      </button>
      
      <!-- æŠ¥å‘Šå†…å®¹å®¹å™¨ -->
      <div id="report-content"></div>
    </div>
  </div>

  <!-- ä¸Šä¼ æˆåŠŸæç¤ºå¼¹çª— -->
  <div id="upload-success-modal" class="fixed top-0 left-0 right-0 bottom-0 bg-black/50 flex items-center justify-center z-50 hidden" style="width: 390px;">
    <div class="bg-white rounded-lg p-6 max-w-[280px] text-center">
      <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">
        <i class="fa fa-check text-2xl text-green-500"></i>
      </div>
      <h3 class="font-medium text-lg text-gray-800 mb-2">ä¸Šä¼ æˆåŠŸï¼</h3>
      <p class="text-sm text-gray-600 mb-4">æŠ¥å‘Šå·²åŒæ­¥ï¼Œç³»ç»Ÿå°†åœ¨5åˆ†é’Ÿå†…å®Œæˆè§£æ</p>
      <button id="success-confirm-btn" class="w-full bg-primary text-white py-2 rounded-lg font-medium">
        ç¡®è®¤
      </button>
    </div>
  </div>

  <!-- JavaScripté€»è¾‘ -->
  <script>
    // DOMå…ƒç´ è·å–
    const loginPage = document.getElementById('login-page');
    const registerPage = document.getElementById('register-page');
    const appMain = document.getElementById('app-main');
    const reportModal = document.getElementById('report-modal');
    const reportContent = document.getElementById('report-content');
    const closeModal = document.getElementById('close-modal');
    
    // ä¸Šä¼ æŠ¥å‘Šç›¸å…³å…ƒç´ 
    const syncReportBtn = document.getElementById('sync-report-btn');
    const reportPage = document.getElementById('report-page');
    const uploadReportPage = document.getElementById('upload-report-page');
    const uploadBackBtn = document.getElementById('upload-back-btn');
    const newUploadArea = document.getElementById('new-upload-area');
    const newFileUpload = document.getElementById('new-file-upload');
    const selectFileBtn = document.getElementById('select-file-btn');
    const fileList = document.getElementById('file-list');
    const batchUploadBtn = document.getElementById('batch-upload-btn');
    const finalSubmitBtn = document.getElementById('final-submit-btn');
    const uploadSuccessModal = document.getElementById('upload-success-modal');
    const successConfirmBtn = document.getElementById('success-confirm-btn');
    
    // åˆå§‹åŒ–ï¼šç¡®ä¿ç™»å½•é¡µé¢æ˜¾ç¤ºï¼Œå…¶ä»–é¡µé¢éšè—
    function initPageDisplay() {
      // ç¡®ä¿ç™»å½•é¡µé¢æ˜¾ç¤º
      loginPage.style.display = 'flex';
      
      // ç¡®ä¿æ³¨å†Œé¡µé¢éšè—
      registerPage.style.display = 'none';
      
      // ç¡®ä¿ä¸»åº”ç”¨éšè—
      appMain.style.display = 'none';
      
      // æ£€æŸ¥æ˜¯å¦æœ‰ç™»å½•çŠ¶æ€ï¼ˆç”¨äºè°ƒè¯•ï¼‰
      console.log('åˆå§‹çŠ¶æ€ - localStorage user:', localStorage.getItem('user'));
    }
    
    // ç™»å½•/æ³¨å†Œåˆ‡æ¢
    document.getElementById('to-register').addEventListener('click', (e) => {
      e.preventDefault();
      loginPage.style.display = 'none';
      registerPage.style.display = 'flex';
    });
    
    document.getElementById('to-login').addEventListener('click', (e) => {
      e.preventDefault();
      registerPage.style.display = 'none';
      loginPage.style.display = 'flex';
    });
    
    // ç™»å½•è¡¨å•æäº¤
    document.getElementById('login-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const username = document.getElementById('login-username').value;
      const password = document.getElementById('login-password').value;
      
      // æ¨¡æ‹Ÿç™»å½•éªŒè¯
      if (username && password) {
        // å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
        localStorage.setItem('user', JSON.stringify({
          username: username,
          phone: '138****8888'
        }));
        
        // æ›´æ–°ä¸ªäººä¸­å¿ƒä¿¡æ¯
        document.getElementById('user-name').textContent = username;
        document.getElementById('user-phone').textContent = '138****8888';
        
        // åˆ‡æ¢åˆ°ä¸»åº”ç”¨ç•Œé¢
        loginPage.style.display = 'none';
        appMain.style.display = 'flex';
        
        // é‡ç½®è¡¨å•
        document.getElementById('login-form').reset();
      } else {
        alert('è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ');
      }
    });
    
    // æ³¨å†Œè¡¨å•æäº¤
    document.getElementById('register-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const username = document.getElementById('reg-username').value;
      const phone = document.getElementById('reg-phone').value;
      const password = document.getElementById('reg-password').value;
      const confirm = document.getElementById('reg-confirm').value;
      
      // ç®€å•éªŒè¯
      if (!username || !phone || !password || !confirm) {
        alert('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«é¡¹');
        return;
      }
      
      if (password !== confirm) {
        alert('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´');
        return;
      }
      
      if (phone.length !== 11) {
        alert('è¯·è¾“å…¥æœ‰æ•ˆçš„11ä½æ‰‹æœºå·ç ');
        return;
      }
      
      // æ¨¡æ‹Ÿæ³¨å†ŒæˆåŠŸ
      alert('æ³¨å†ŒæˆåŠŸï¼è¯·ç™»å½•');
      registerPage.style.display = 'none';
      loginPage.style.display = 'flex';
      
      // è‡ªåŠ¨å¡«å……ç”¨æˆ·å
      document.getElementById('login-username').value = username;
      
      // é‡ç½®æ³¨å†Œè¡¨å•
      document.getElementById('register-form').reset();
    });
    
    // åº•éƒ¨å¯¼èˆªåˆ‡æ¢
    const navButtons = [
      { id: 'nav-home', page: 'home-page', title: 'ä»Šæ—¥ç”¨è¯æé†’' },
      { id: 'nav-ai', page: 'ai-assistant-page', title: 'AIè¯å“åŠ©æ‰‹' },
      { id: 'nav-report', page: 'report-page', title: 'èº«ä½“æŠ¥å‘Š' },
      { id: 'nav-profile', page: 'profile-page', title: 'ä¸ªäººä¸­å¿ƒ' }
    ];
    
    // é¡µé¢å†…å®¹åŒºåŸŸ
    const contentPages = {
      'home-page': document.getElementById('home-page'),
      'ai-assistant-page': document.getElementById('ai-assistant-page'),
      'report-page': document.getElementById('report-page'),
      'profile-page': document.getElementById('profile-page'),
      'upload-report-page': document.getElementById('upload-report-page')
    };
    
    // åˆå§‹åŒ–å¯¼èˆªäº‹ä»¶ - ä¿®å¤ç‰ˆæœ¬
    navButtons.forEach(item => {
      document.getElementById(item.id).addEventListener('click', () => {
        // æ›´æ–°å¯¼èˆªæ ·å¼
        navButtons.forEach(btn => {
          document.getElementById(btn.id).classList.remove('nav-active');
          document.getElementById(btn.id).classList.add('text-gray-600');
        });
        
        document.getElementById(item.id).classList.add('nav-active');
        document.getElementById(item.id).classList.remove('text-gray-600');
        
        // æ›´æ–°é¡µé¢æ ‡é¢˜
        document.getElementById('page-title').textContent = item.title;
        
        // åˆ‡æ¢å†…å®¹é¡µé¢ - ä½¿ç”¨classListæ¥æ§åˆ¶æ˜¾ç¤º/éšè—
        Object.keys(contentPages).forEach(page => {
          contentPages[page].classList.add('hidden');
        });
        contentPages[item.page].classList.remove('hidden');
        
        // æ»šåŠ¨åˆ°é¡¶éƒ¨
        document.querySelector('main').scrollTop = 0;
      });
    });
    
    // AIåŠ©æ‰‹èŠå¤©åŠŸèƒ½
    document.getElementById('chat-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const input = document.getElementById('chat-input');
      const message = input.value.trim();
      
      if (!message) return;
      
      const chatMessages = document.getElementById('chat-messages');
      
      // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
      const userMessage = document.createElement('div');
      userMessage.className = 'flex items-start justify-end';
      userMessage.innerHTML = `
        <div class="bg-primary/10 rounded-lg px-4 py-2 max-w-[80%]">
          <p class="text-gray-800">${message}</p>
        </div>
        <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 ml-2">
          <i class="fa fa-user"></i>
        </div>
      `;
      chatMessages.appendChild(userMessage);
      
      // æ¸…ç©ºè¾“å…¥æ¡†
      input.value = '';
      
      // æ¨¡æ‹ŸAIå›å¤
      setTimeout(() => {
        const aiMessage = document.createElement('div');
        aiMessage.className = 'flex items-start';
        
        // æ ¹æ®é—®é¢˜ç±»å‹ç”Ÿæˆä¸åŒå›å¤
        let reply = '';
        if (message.includes('å¸ƒæ´›èŠ¬')) {
          reply = 'å¸ƒæ´›èŠ¬ç¼“é‡Šèƒ¶å›Šä¸»è¦ç”¨äºç¼“è§£è½»è‡³ä¸­åº¦ç–¼ç—›å¦‚å¤´ç—›ã€å…³èŠ‚ç—›ç­‰ï¼Œä¹Ÿç”¨äºæ™®é€šæ„Ÿå†’æˆ–æµè¡Œæ€§æ„Ÿå†’å¼•èµ·çš„å‘çƒ­ã€‚æˆäººä¸€æ¬¡1ç²’ï¼Œä¸€æ—¥2æ¬¡ï¼ˆæ—©æ™šå„ä¸€æ¬¡ï¼‰ã€‚';
        } else if (message.includes('ç”¨è¯æŒ‡å¯¼') || message.includes('æŒ‡å¯¼')) {
          reply = 'ç”¨è¯å‰è¯·ä»”ç»†é˜…è¯»è¯å“è¯´æ˜ä¹¦ï¼ŒæŒ‰åŒ»å˜±æˆ–è¯´æ˜ä¹¦å‰‚é‡æœç”¨ã€‚å¦‚æ­£åœ¨ä½¿ç”¨å…¶ä»–è¯å“ï¼Œä½¿ç”¨æœ¬å“å‰è¯·å’¨è¯¢åŒ»å¸ˆæˆ–è¯å¸ˆã€‚';
        } else if (message.includes('æŸ¥è¯¢') || message.includes('ä¿¡æ¯')) {
          reply = 'æ‚¨å¯ä»¥å‘Šè¯‰æˆ‘å…·ä½“æƒ³æŸ¥è¯¢çš„è¯å“åç§°ï¼Œæˆ‘ä¼šä¸ºæ‚¨æä¾›è¯¦ç»†çš„è¯å“ä¿¡æ¯ï¼ŒåŒ…æ‹¬é€‚åº”ç—‡ã€ç”¨æ³•ç”¨é‡ã€ä¸è‰¯ååº”ç­‰ã€‚';
        } else {
          reply = 'æ„Ÿè°¢æ‚¨çš„æé—®ï¼è¯å“ä½¿ç”¨è¯·ä¸¥æ ¼éµå¾ªåŒ»å˜±ï¼Œå¦‚æœ‰ä¸é€‚è¯·åŠæ—¶å°±åŒ»ã€‚å¦‚éœ€å…·ä½“è¯å“ä¿¡æ¯ï¼Œè¯·å‘Šè¯‰æˆ‘è¯å“åç§°ã€‚';
        }
        
        aiMessage.innerHTML = `
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white mr-2">
            <i class="fa fa-robot"></i>
          </div>
          <div class="bg-gray-100 rounded-lg px-4 py-2 max-w-[80%]">
            <p class="text-gray-800">${reply}</p>
          </div>
        `;
        chatMessages.appendChild(aiMessage);
        
        // æ»šåŠ¨åˆ°åº•éƒ¨
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }, 1000);
      
      // æ»šåŠ¨åˆ°åº•éƒ¨
      chatMessages.scrollTop = chatMessages.scrollHeight;
    });
    
    // é€€å‡ºç™»å½• - ä¿®å¤åçš„ç‰ˆæœ¬
    document.getElementById('logout-btn').addEventListener('click', () => {
      if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
        // æ¸…é™¤ç”¨æˆ·ç™»å½•çŠ¶æ€
        localStorage.removeItem('user');
        
        // éšè—ä¸»åº”ç”¨
        appMain.style.display = 'none';
        
        // æ˜¾ç¤ºç™»å½•é¡µé¢
        loginPage.style.display = 'flex';
        registerPage.style.display = 'none';
        
        // æ¸…ç©ºç™»å½•è¡¨å•
        document.getElementById('login-username').value = '';
        document.getElementById('login-password').value = '';
        
        // é‡ç½®å¯¼èˆªåˆ°é¦–é¡µ
        navButtons.forEach(btn => {
          document.getElementById(btn.id).classList.remove('nav-active');
          document.getElementById(btn.id).classList.add('text-gray-600');
        });
        document.getElementById('nav-home').classList.add('nav-active');
        document.getElementById('nav-home').classList.remove('text-gray-600');
        
        // åˆ‡æ¢åˆ°é¦–é¡µ
        Object.keys(contentPages).forEach(page => {
          contentPages[page].classList.add('hidden');
        });
        contentPages['home-page'].classList.remove('hidden');
        document.getElementById('page-title').textContent = 'ä»Šæ—¥ç”¨è¯æé†’';
        
        console.log('å·²é€€å‡ºç™»å½•ï¼Œè¿”å›ç™»å½•é¡µé¢');
      }
    });

    // ç”Ÿæˆå¹´åº¦ä½“æ£€æŠ¥å‘Š
    function generateAnnualReport() {
      return `
        <div class="space-y-4">
          <!-- æŠ¥å‘Šå¤´éƒ¨ -->
          <div class="text-center border-b border-gray-200 pb-3 mb-3">
            <h2 class="text-xl font-bold text-gray-800 mb-1">2025å¹´åº¦å¥åº·ä½“æ£€æŠ¥å‘Š</h2>
            <div class="flex justify-center items-center text-sm text-gray-600 space-x-4">
              <span><i class="fa fa-hospital-o mr-1"></i> å¸‚ç¬¬ä¸€äººæ°‘åŒ»é™¢ä½“æ£€ä¸­å¿ƒ</span>
              <span><i class="fa fa-calendar mr-1"></i> 2025-11-20</span>
            </div>
            <div class="mt-2 text-sm">
              <span class="inline-block bg-primary/10 text-primary px-2 py-1 rounded-full text-xs">ä½“æ£€ç¼–å·ï¼šTJ202511200088</span>
            </div>
          </div>
          
          <!-- åŸºæœ¬ä¿¡æ¯ -->
          <div class="bg-gray-50 p-3 rounded-lg">
            <h3 class="font-medium text-gray-800 mb-2">ä¸€ã€åŸºæœ¬ä¿¡æ¯</h3>
            <table class="report-table">
              <tr>
                <td class="report-td w-1/3">å¼ ä¸‰</td>
                <td class="report-td">${localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')).username : 'ç”¨æˆ·'}</td>
              </tr>
              <tr>
                <td class="report-td">æ€§åˆ«</td>
                <td class="report-td">ç”·</td>
              </tr>
              <tr>
                <td class="report-td">å¹´é¾„</td>
                <td class="report-td">35å²</td>
              </tr>
              <tr>
                <td class="report-td">èº«é«˜/ä½“é‡</td>
                <td class="report-td">175cm / 72kg (BMI: 23.5)</td>
              </tr>
              <tr>
                <td class="report-td">è”ç³»æ–¹å¼</td>
                <td class="report-td">138****8888</td>
              </tr>
            </table>
          </div>
          
          <!-- ä½“æ£€é¡¹ç›®æ±‡æ€» -->
          <div>
            <h3 class="font-medium text-gray-800 mb-2">äºŒã€ä½“æ£€é¡¹ç›®æ±‡æ€»</h3>
            <div class="grid grid-cols-2 gap-2 mb-3">
              <div class="bg-green-50 border border-green-100 p-2 rounded-lg text-center">
                <p class="text-lg font-bold text-normal">28</p>
                <p class="text-xs text-gray-600">æ£€æŸ¥é¡¹ç›®æ€»æ•°</p>
              </div>
              <div class="bg-green-50 border border-green-100 p-2 rounded-lg text-center">
                <p class="text-lg font-bold text-normal">25</p>
                <p class="text-xs text-gray-600">æ­£å¸¸é¡¹ç›®æ•°</p>
              </div>
              <div class="bg-yellow-50 border border-yellow-100 p-2 rounded-lg text-center">
                <p class="text-lg font-bold text-warning">3</p>
                <p class="text-xs text-gray-600">å¼‚å¸¸/éœ€å…³æ³¨é¡¹ç›®</p>
              </div>
              <div class="bg-blue-50 border border-blue-100 p-2 rounded-lg text-center">
                <p class="text-lg font-bold text-primary">96.4%</p>
                <p class="text-xs text-gray-600">æ•´ä½“å¥åº·è¯„åˆ†</p>
              </div>
            </div>
            
            <!-- å¼‚å¸¸é¡¹ç›® -->
            <div class="bg-warning/10 border-l-4 border-warning p-3 rounded-r-lg mb-3">
              <h4 class="font-medium text-gray-800 mb-1">å¼‚å¸¸é¡¹ç›®æç¤º</h4>
              <ul class="text-sm space-y-1 text-gray-700">
                <li>â€¢ è¡€å¸¸è§„ï¼šè¡€çº¢è›‹ç™½ç•¥ä½ï¼ˆ125g/Lï¼‰ï¼Œæç¤ºè½»å¾®è´«è¡€</li>
                <li>â€¢ è¡€è„‚ï¼šç”˜æ²¹ä¸‰é…¯è½»åº¦å‡é«˜ï¼ˆ1.85mmol/Lï¼‰</li>
                <li>â€¢ å°¿å¸¸è§„ï¼šå°¿æ½œè¡€ Â±ï¼Œå»ºè®®å¤æŸ¥</li>
              </ul>
            </div>
          </div>
          
          <!-- å„ç³»ç»Ÿæ£€æŸ¥ç»“æœ -->
          <div class="space-y-3">
            <div>
              <h4 class="font-medium text-gray-800 flex items-center">
                <i class="fa fa-heartbeat text-primary mr-2"></i>
                å¿ƒè¡€ç®¡ç³»ç»Ÿ
              </h4>
              <div class="ml-6 mt-2 text-sm text-gray-700">
                <p>â€¢ è¡€å‹ï¼š125/80 mmHgï¼ˆæ­£å¸¸ï¼‰</p>
                <p>â€¢ å¿ƒç‡ï¼š72 æ¬¡/åˆ†ï¼ˆæ­£å¸¸ï¼‰</p>
                <p>â€¢ å¿ƒç”µå›¾ï¼šçª¦æ€§å¿ƒå¾‹ï¼Œæ­£å¸¸å¿ƒç”µå›¾</p>
              </div>
            </div>
            
            <div>
              <h4 class="font-medium text-gray-800 flex items-center">
                <i class="fa fa-stethoscope text-primary mr-2"></i>
                å‘¼å¸ç³»ç»Ÿ
              </h4>
              <div class="ml-6 mt-2 text-sm text-gray-700">
                <p>â€¢ èƒ¸éƒ¨DRï¼šåŒè‚ºçº¹ç†æ¸…æ™°ï¼Œæœªè§æ˜æ˜¾å¼‚å¸¸</p>
                <p>â€¢ è‚ºåŠŸèƒ½ï¼šé€šæ°”åŠŸèƒ½æ­£å¸¸</p>
              </div>
            </div>
            
            <div>
              <h4 class="font-medium text-gray-800 flex items-center">
                <i class="fa fa-medkit text-primary mr-2"></i>
                æ¶ˆåŒ–ç³»ç»Ÿ
              </h4>
              <div class="ml-6 mt-2 text-sm text-gray-700">
                <p>â€¢ è…¹éƒ¨Bè¶…ï¼šè‚ã€èƒ†ã€èƒ°ã€è„¾æœªè§æ˜æ˜¾å¼‚å¸¸</p>
                <p>â€¢ è‚åŠŸèƒ½ï¼šALT 28 U/Lï¼ŒAST 25 U/Lï¼ˆæ­£å¸¸ï¼‰</p>
                <p>â€¢ èƒƒé•œï¼šæµ…è¡¨æ€§èƒƒç‚ï¼Œå»ºè®®é¥®é£Ÿè°ƒç†</p>
              </div>
            </div>
          </div>
          
          <!-- åŒ»ç”Ÿå»ºè®® -->
          <div class="bg-primary/5 p-3 rounded-lg">
            <h3 class="font-medium text-gray-800 mb-2 flex items-center">
              <i class="fa fa-user-md text-primary mr-2"></i>
              åŒ»ç”Ÿç»¼åˆå»ºè®®
            </h3>
            <div class="text-sm text-gray-700 space-y-2">
              <p>1. é’ˆå¯¹è½»å¾®è´«è¡€ï¼šå¢åŠ å«é“é£Ÿç‰©æ‘„å…¥ï¼ˆçº¢è‚‰ã€åŠ¨ç‰©è‚è„ã€è èœç­‰ï¼‰ï¼Œè¡¥å……ç»´ç”Ÿç´ Cä¿ƒè¿›é“å¸æ”¶ï¼Œ3ä¸ªæœˆåå¤æŸ¥è¡€å¸¸è§„ã€‚</p>
              <p>2. é’ˆå¯¹ç”˜æ²¹ä¸‰é…¯å‡é«˜ï¼šæ§åˆ¶é¥®é£Ÿï¼Œå‡å°‘é«˜è„‚è‚ªã€é«˜ç³–åˆ†é£Ÿç‰©æ‘„å…¥ï¼Œå¢åŠ æœ‰æ°§è¿åŠ¨ï¼Œå»ºè®®æ¯å‘¨è‡³å°‘150åˆ†é’Ÿä¸­ç­‰å¼ºåº¦è¿åŠ¨ã€‚</p>
              <p>3. å°¿æ½œè¡€Â±ï¼šå»ºè®®å¤šé¥®æ°´ï¼Œé¿å…æ†‹å°¿ï¼Œ1ä¸ªæœˆåå¤æŸ¥å°¿å¸¸è§„ã€‚</p>
              <p>4. ç”Ÿæ´»æ–¹å¼ï¼šä¿æŒè§„å¾‹ä½œæ¯ï¼Œé¿å…ç†¬å¤œï¼Œæˆ’çƒŸé™é…’ï¼Œä¿æŒè‰¯å¥½å¿ƒæ€ã€‚</p>
              <p>5. å®šæœŸå¤æŸ¥ï¼šå»ºè®®6ä¸ªæœˆåè¿›è¡Œä¸€æ¬¡å¥åº·å¤æŸ¥ï¼Œé‡ç‚¹å…³æ³¨è¡€å¸¸è§„ã€è¡€è„‚ã€å°¿å¸¸è§„æŒ‡æ ‡ã€‚</p>
            </div>
          </div>
          
          <!-- æŠ¥å‘Šåº•éƒ¨ -->
          <div class="text-center text-xs text-gray-500 mt-4 pt-3 border-t border-gray-200">
            <p>æœ¬æŠ¥å‘Šä»…ä½œä¸ºå¥åº·å‚è€ƒï¼Œå¦‚æœ‰ä¸é€‚è¯·åŠæ—¶å°±åŒ»</p>
            <p class="mt-1">åŒ»å¸ˆç­¾åï¼šå¼ åŒ»ç”Ÿ | å®¡æ ¸æ—¥æœŸï¼š2025-11-22</p>
          </div>
        </div>
      `;
    }

    // ç”Ÿæˆè¡€å¸¸è§„æŠ¥å‘Š
    function generateBloodReport() {
      return `
        <div class="space-y-4">
          <!-- æŠ¥å‘Šå¤´éƒ¨ -->
          <div class="text-center border-b border-gray-200 pb-3 mb-3">
            <h2 class="text-xl font-bold text-gray-800 mb-1">è¡€å¸¸è§„æ£€æŸ¥æŠ¥å‘Š</h2>
            <div class="flex justify-center items-center text-sm text-gray-600 space-x-4">
              <span><i class="fa fa-hospital-o mr-1"></i> å¸‚ä¸­å¿ƒåŒ»é™¢æ£€éªŒç§‘</span>
              <span><i class="fa fa-calendar mr-1"></i> 2025-10-15</span>
            </div>
            <div class="mt-2 text-sm">
              <span class="inline-block bg-primary/10 text-primary px-2 py-1 rounded-full text-xs">æ£€éªŒç¼–å·ï¼šJY202510150126</span>
            </div>
          </div>
          
          <!-- åŸºæœ¬ä¿¡æ¯ -->
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <table class="report-table">
              <tr>
                <td class="report-td w-1/3">å¼ ä¸‰</td>
                <td class="report-td">${localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')).username : 'ç”¨æˆ·'}</td>
              </tr>
              <tr>
                <td class="report-td">æ€§åˆ«/å¹´é¾„</td>
                <td class="report-td">ç”· / 35å²</td>
              </tr>
              <tr>
                <td class="report-td">ç”³è¯·ç§‘å®¤</td>
                <td class="report-td">å…¨ç§‘é—¨è¯Š</td>
              </tr>
              <tr>
                <td class="report-td">ç”³è¯·åŒ»ç”Ÿ</td>
                <td class="report-td">æåŒ»ç”Ÿ</td>
              </tr>
            </table>
          </div>
          
          <!-- è¡€å¸¸è§„æ£€æµ‹ç»“æœ -->
          <div>
            <h3 class="font-medium text-gray-800 mb-2">è¡€å¸¸è§„æ£€æµ‹ç»“æœ</h3>
            <div class="overflow-x-auto">
              <table class="report-table">
                <thead>
                  <tr>
                    <th class="report-th">æ£€æµ‹é¡¹ç›®</th>
                    <th class="report-th">ç»“æœ</th>
                    <th class="report-th">å‚è€ƒèŒƒå›´</th>
                    <th class="report-th">å•ä½</th>
                    <th class="report-th">çŠ¶æ€</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="report-td">ç™½ç»†èƒè®¡æ•°(WBC)</td>
                    <td class="report-td">6.5</td>
                    <td class="report-td">3.5-9.5</td>
                    <td class="report-td">Ã—10^9/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">çº¢ç»†èƒè®¡æ•°(RBC)</td>
                    <td class="report-td">4.5</td>
                    <td class="report-td">4.3-5.8</td>
                    <td class="report-td">Ã—10^12/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">è¡€çº¢è›‹ç™½(HGB)</td>
                    <td class="report-td">125</td>
                    <td class="report-td">130-175</td>
                    <td class="report-td">g/L</td>
                    <td class="report-td text-abnormal">åä½</td>
                  </tr>
                  <tr>
                    <td class="report-td">çº¢ç»†èƒå‹ç§¯(HCT)</td>
                    <td class="report-td">38.5</td>
                    <td class="report-td">40.0-50.0</td>
                    <td class="report-td">%</td>
                    <td class="report-td text-abnormal">åä½</td>
                  </tr>
                  <tr>
                    <td class="report-td">è¡€å°æ¿è®¡æ•°(PLT)</td>
                    <td class="report-td">225</td>
                    <td class="report-td">100-300</td>
                    <td class="report-td">Ã—10^9/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">æ·‹å·´ç»†èƒç™¾åˆ†æ¯”(LY%)</td>
                    <td class="report-td">35.2</td>
                    <td class="report-td">20.0-50.0</td>
                    <td class="report-td">%</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">ä¸­æ€§ç²’ç»†èƒç™¾åˆ†æ¯”(NE%)</td>
                    <td class="report-td">58.6</td>
                    <td class="report-td">40.0-75.0</td>
                    <td class="report-td">%</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">çº¢ç»†èƒå¹³å‡ä½“ç§¯(MCV)</td>
                    <td class="report-td">85.6</td>
                    <td class="report-td">82.0-100.0</td>
                    <td class="report-td">fL</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">å¹³å‡è¡€çº¢è›‹ç™½å«é‡(MCH)</td>
                    <td class="report-td">27.8</td>
                    <td class="report-td">27.0-34.0</td>
                    <td class="report-td">pg</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">å¹³å‡è¡€çº¢è›‹ç™½æµ“åº¦(MCHC)</td>
                    <td class="report-td">325</td>
                    <td class="report-td">316-354</td>
                    <td class="report-td">g/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- æ£€éªŒç»“è®º -->
          <div class="bg-primary/5 p-3 rounded-lg mt-4">
            <h4 class="font-medium text-gray-800 mb-2">æ£€éªŒç»“è®º</h4>
            <div class="text-sm text-gray-700 space-y-1">
              <p>1. ç™½ç»†èƒã€è¡€å°æ¿ç­‰æŒ‡æ ‡æ­£å¸¸ï¼Œæœªè§æ„ŸæŸ“ã€å‡ºè¡€å€¾å‘ç­‰å¼‚å¸¸ã€‚</p>
              <p>2. è¡€çº¢è›‹ç™½ï¼ˆ125g/Lï¼‰åŠçº¢ç»†èƒå‹ç§¯ï¼ˆ38.5%ï¼‰ç•¥ä½äºæ­£å¸¸å‚è€ƒå€¼ï¼Œæç¤ºè½»åº¦ç¼ºé“æ€§è´«è¡€å¯èƒ½ã€‚</p>
              <p>3. çº¢ç»†èƒç›¸å…³å…¶ä»–æŒ‡æ ‡æ­£å¸¸ï¼Œæš‚ä¸æ”¯æŒåœ°ä¸­æµ·è´«è¡€ç­‰å…¶ä»–ç±»å‹è´«è¡€è¯Šæ–­ã€‚</p>
              <p>4. å»ºè®®ï¼š</p>
              <ul class="list-disc pl-5 text-xs">
                <li>å¢åŠ å«é“é£Ÿç‰©æ‘„å…¥ï¼ˆçº¢è‚‰ã€åŠ¨ç‰©è‚è„ã€è èœã€é»‘æœ¨è€³ç­‰ï¼‰</li>
                <li>è¡¥å……ç»´ç”Ÿç´ Cï¼ˆæ–°é²œè”¬æœï¼‰ä¿ƒè¿›é“å¸æ”¶</li>
                <li>é¿å…æµ“èŒ¶ã€å’–å•¡ä¸é“å‰‚/å«é“é£Ÿç‰©åŒæœ</li>
                <li>3ä¸ªæœˆåå¤æŸ¥è¡€å¸¸è§„</li>
              </ul>
            </div>
          </div>
          
          <!-- æŠ¥å‘Šå®¡æ ¸ä¿¡æ¯ -->
          <div class="text-xs text-gray-500 mt-4 pt-2 border-t border-gray-200">
            <p class="flex justify-between">
              <span>æ£€éªŒå¸ˆï¼šç‹æŠ€å¸ˆ</span>
              <span>å®¡æ ¸å¸ˆï¼šåˆ˜ä¸»ä»»</span>
            </p>
            <p class="text-center mt-1">æŠ¥å‘Šæ—¶é—´ï¼š2025-10-15 14:28</p>
          </div>
        </div>
      `;
    }

    // ç”Ÿæˆè‚åŠŸèƒ½æŠ¥å‘Š
    function generateLiverReport() {
      return `
        <div class="space-y-4">
          <!-- æŠ¥å‘Šå¤´éƒ¨ -->
          <div class="text-center border-b border-gray-200 pb-3 mb-3">
            <h2 class="text-xl font-bold text-gray-800 mb-1">è‚åŠŸèƒ½æ£€æŸ¥æŠ¥å‘Š</h2>
            <div class="flex justify-center items-center text-sm text-gray-600 space-x-4">
              <span><i class="fa fa-hospital-o mr-1"></i> å¸‚ä¸­åŒ»é™¢æ£€éªŒç§‘</span>
              <span><i class="fa fa-calendar mr-1"></i> 2025-09-05</span>
            </div>
            <div class="mt-2 text-sm">
              <span class="inline-block bg-primary/10 text-primary px-2 py-1 rounded-full text-xs">æ£€éªŒç¼–å·ï¼šJY202509050078</span>
            </div>
          </div>
          
          <!-- åŸºæœ¬ä¿¡æ¯ -->
          <div class="bg-gray-50 p-3 rounded-lg mb-3">
            <table class="report-table">
              <tr>
                <td class="report-td w-1/3">å§“å</td>
                <td class="report-td">${localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')).username : 'ç”¨æˆ·'}</td>
              </tr>
              <tr>
                <td class="report-td">æ€§åˆ«/å¹´é¾„</td>
                <td class="report-td">ç”· / 35å²</td>
              </tr>
              <tr>
                <td class="report-td">ç”³è¯·ç§‘å®¤</td>
                <td class="report-td">æ¶ˆåŒ–å†…ç§‘</td>
              </tr>
              <tr>
                <td class="report-td">ç”³è¯·åŒ»ç”Ÿ</td>
                <td class="report-td">é™ˆåŒ»ç”Ÿ</td>
              </tr>
            </table>
          </div>
          
          <!-- è‚åŠŸèƒ½æ£€æµ‹ç»“æœ -->
          <div>
            <h3 class="font-medium text-gray-800 mb-2">è‚åŠŸèƒ½æ£€æµ‹ç»“æœ</h3>
            <div class="overflow-x-auto">
              <table class="report-table">
                <thead>
                  <tr>
                    <th class="report-th">æ£€æµ‹é¡¹ç›®</th>
                    <th class="report-th">ç»“æœ</th>
                    <th class="report-th">å‚è€ƒèŒƒå›´</th>
                    <th class="report-th">å•ä½</th>
                    <th class="report-th">çŠ¶æ€</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="report-td">è°·ä¸™è½¬æ°¨é…¶(ALT)</td>
                    <td class="report-td">28</td>
                    <td class="report-td">0-40</td>
                    <td class="report-td">U/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">è°·è‰è½¬æ°¨é…¶(AST)</td>
                    <td class="report-td">25</td>
                    <td class="report-td">0-40</td>
                    <td class="report-td">U/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">æ€»èƒ†çº¢ç´ (TBIL)</td>
                    <td class="report-td">12.5</td>
                    <td class="report-td">5.1-19.0</td>
                    <td class="report-td">Î¼mol/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">ç›´æ¥èƒ†çº¢ç´ (DBIL)</td>
                    <td class="report-td">3.8</td>
                    <td class="report-td">0-6.8</td>
                    <td class="report-td">Î¼mol/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">æ€»è›‹ç™½(TP)</td>
                    <td class="report-td">72.5</td>
                    <td class="report-td">65-85</td>
                    <td class="report-td">g/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">ç™½è›‹ç™½(ALB)</td>
                    <td class="report-td">45.2</td>
                    <td class="report-td">40-55</td>
                    <td class="report-td">g/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">çƒè›‹ç™½(GLB)</td>
                    <td class="report-td">27.3</td>
                    <td class="report-td">20-35</td>
                    <td class="report-td">g/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">ç™½çƒæ¯”(A/G)</td>
                    <td class="report-td">1.66</td>
                    <td class="report-td">1.2-2.4</td>
                    <td class="report-td">-</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">ç¢±æ€§ç£·é…¸é…¶(ALP)</td>
                    <td class="report-td">85</td>
                    <td class="report-td">45-125</td>
                    <td class="report-td">U/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                  <tr>
                    <td class="report-td">Î³-è°·æ°¨é…°è½¬è‚½é…¶(GGT)</td>
                    <td class="report-td">32</td>
                    <td class="report-td">10-60</td>
                    <td class="report-td">U/L</td>
                    <td class="report-td text-normal">æ­£å¸¸</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- æ£€éªŒç»“è®º -->
          <div class="bg-primary/5 p-3 rounded-lg mt-4">
            <h4 class="font-medium text-gray-800 mb-2">æ£€éªŒç»“è®º</h4>
            <div class="text-sm text-gray-700 space-y-1">
              <p>1. å„é¡¹è‚åŠŸèƒ½æŒ‡æ ‡ï¼ˆè½¬æ°¨é…¶ã€èƒ†çº¢ç´ ã€è›‹ç™½ç­‰ï¼‰å‡åœ¨æ­£å¸¸å‚è€ƒèŒƒå›´å†…ï¼Œæœªè§æ˜æ˜¾è‚åŠŸèƒ½å¼‚å¸¸ã€‚</p>
              <p>2. è‚é…¶å­¦æŒ‡æ ‡æ­£å¸¸ï¼Œæ’é™¤è‚ç»†èƒæŸä¼¤ã€èƒ†é“æ¢—é˜»ç­‰è‚è„ç–¾ç—…å¯èƒ½ã€‚</p>
              <p>3. è›‹ç™½ä»£è°¢æŒ‡æ ‡æ­£å¸¸ï¼Œæç¤ºè‚è„åˆæˆåŠŸèƒ½è‰¯å¥½ã€‚</p>
              <p>4. å»ºè®®ï¼š</p>
              <ul class="list-disc pl-5 text-xs">
                <li>ä¿æŒå¥åº·ç”Ÿæ´»æ–¹å¼ï¼Œé¿å…è¿‡é‡é¥®é…’</li>
                <li>é¿å…æ»¥ç”¨è¯ç‰©ï¼Œå‡å°‘è‚è„ä»£è°¢è´Ÿæ‹…</li>
                <li>å‡è¡¡é¥®é£Ÿï¼Œé€‚é‡è¿åŠ¨ï¼Œå®šæœŸä½“æ£€</li>
                <li>å¦‚æœ‰è‚åŒºä¸é€‚ã€é»„ç–¸ç­‰ç—‡çŠ¶ï¼ŒåŠæ—¶å°±åŒ»</li>
              </ul>
            </div>
          </div>
          
          <!-- æŠ¥å‘Šå®¡æ ¸ä¿¡æ¯ -->
          <div class="text-xs text-gray-500 mt-4 pt-2 border-t border-gray-200">
            <p class="flex justify-between">
              <span>æ£€éªŒå¸ˆï¼šé™ˆæŠ€å¸ˆ</span>
              <span>å®¡æ ¸å¸ˆï¼šèµµä¸»ä»»</span>
            </p>
            <p class="text-center mt-1">æŠ¥å‘Šæ—¶é—´ï¼š2025-09-05 10:15</p>
          </div>
        </div>
      `;
    }

    // æ‰“å¼€æŠ¥å‘Šè¯¦æƒ…å¼¹çª—
    document.querySelectorAll('.view-report').forEach(button => {
      button.addEventListener('click', function() {
        const reportType = this.getAttribute('data-report-type');
        let reportHtml = '';
        
        // æ ¹æ®æŠ¥å‘Šç±»å‹ç”Ÿæˆå¯¹åº”å†…å®¹
        switch(reportType) {
          case 'annual':
            reportHtml = generateAnnualReport();
            break;
          case 'blood':
            reportHtml = generateBloodReport();
            break;
          case 'liver':
            reportHtml = generateLiverReport();
            break;
          default:
            reportHtml = '<div class="text-center py-8"><p class="text-gray-600">æš‚æ— æŠ¥å‘Šæ•°æ®</p></div>';
        }
        
        // å¡«å……æŠ¥å‘Šå†…å®¹å¹¶æ˜¾ç¤ºå¼¹çª—
        reportContent.innerHTML = reportHtml;
        reportModal.classList.add('show');
        reportModal.style.display = 'flex';
        
        // ç¦æ­¢èƒŒæ™¯æ»šåŠ¨
        document.querySelector('main').style.overflow = 'hidden';
        
        // æ»šåŠ¨åˆ°å¼¹çª—é¡¶éƒ¨
        reportModal.scrollTop = 0;
      });
    });

    // å…³é—­æŠ¥å‘Šå¼¹çª—
    closeModal.addEventListener('click', function() {
      reportModal.classList.remove('show');
      reportModal.style.display = 'none';
      // æ¢å¤èƒŒæ™¯æ»šåŠ¨
      document.querySelector('main').style.overflow = 'auto';
    });

    // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
    reportModal.addEventListener('click', function(e) {
      if (e.target === reportModal) {
        reportModal.classList.remove('show');
        reportModal.style.display = 'none';
        document.querySelector('main').style.overflow = 'auto';
      }
    });

    // åŒæ­¥æŠ¥å‘ŠæŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆè·³è½¬ä¸Šä¼ é¡µé¢ï¼‰- ä¿®å¤ç‰ˆæœ¬
    syncReportBtn.addEventListener('click', function() {
      console.log('ç‚¹å‡»äº†åŒæ­¥æŠ¥å‘ŠæŒ‰é’®');
      
      // éšè—æŠ¥å‘Šåˆ—è¡¨
      reportPage.classList.add('hidden');
      
      // æ˜¾ç¤ºä¸Šä¼ é¡µé¢
      uploadReportPage.classList.remove('hidden');
      
      // æ›´æ–°é¡µé¢æ ‡é¢˜
      document.getElementById('page-title').textContent = 'åŒæ­¥ä½“æ£€æŠ¥å‘Š';
      
      // æ»šåŠ¨åˆ°é¡¶éƒ¨
      document.querySelector('main').scrollTop = 0;
      
      console.log('å·²åˆ‡æ¢åˆ°ä¸Šä¼ æŠ¥å‘Šé¡µé¢');
    });

    // ä¸Šä¼ é¡µé¢è¿”å›æŒ‰é’®é€»è¾‘ - ç¡®ä¿æ­£ç¡®ç»‘å®šäº‹ä»¶
    if (uploadBackBtn) {
      uploadBackBtn.addEventListener('click', function(e) {
        e.preventDefault();
        console.log('ç‚¹å‡»äº†ä¸Šä¼ é¡µé¢è¿”å›æŒ‰é’®');
        
        // ç¡®è®¤é€€å‡ºä¸Šä¼ 
        if (fileList.classList.contains('show')) {
          if (!confirm('æ‚¨æœ‰æœªä¸Šä¼ çš„æ–‡ä»¶ï¼Œç¡®å®šè¦è¿”å›å—ï¼Ÿ')) {
            return;
          }
        }
        
        // éšè—ä¸Šä¼ é¡µé¢
        uploadReportPage.classList.add('hidden');
        
        // æ˜¾ç¤ºæŠ¥å‘Šåˆ—è¡¨
        reportPage.classList.remove('hidden');
        
        // æ›´æ–°é¡µé¢æ ‡é¢˜
        document.getElementById('page-title').textContent = 'èº«ä½“æŠ¥å‘Š';
        
        // æ»šåŠ¨åˆ°é¡¶éƒ¨
        document.querySelector('main').scrollTop = 0;
        
        console.log('å·²è¿”å›æŠ¥å‘Šåˆ—è¡¨é¡µé¢');
      });
    } else {
      console.error('ä¸Šä¼ è¿”å›æŒ‰é’®å…ƒç´ æœªæ‰¾åˆ°ï¼');
    }
    
    // 2. é€‰æ‹©æ–‡ä»¶æŒ‰é’®é€»è¾‘ï¼ˆç‹¬ç«‹ä¸Šä¼ æŒ‰é’®ï¼‰
    if (selectFileBtn) {
      selectFileBtn.addEventListener('click', function() {
        newFileUpload.click();
      });
    }
    
    // 3. æ‹–æ‹½ä¸Šä¼ é€»è¾‘ï¼ˆä»¿APPä½“éªŒï¼‰
    if (newUploadArea) {
      newUploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        newUploadArea.classList.add('border-primary');
        newUploadArea.classList.add('bg-primary/5');
      });
      
      newUploadArea.addEventListener('dragleave', function() {
        newUploadArea.classList.remove('border-primary');
        newUploadArea.classList.remove('bg-primary/5');
      });
      
      newUploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        newUploadArea.classList.remove('border-primary');
        newUploadArea.classList.remove('bg-primary/5');
        
        const files = e.dataTransfer.files;
        if (files.length > 0) {
          handleFiles(files);
        }
      });
    }
    
    // 4. æ–‡ä»¶é€‰æ‹©å¤„ç†é€»è¾‘ï¼ˆä»¿APPæ–‡ä»¶é˜Ÿåˆ—ï¼‰
    if (newFileUpload) {
      newFileUpload.addEventListener('change', function(e) {
        const files = e.target.files;
        if (files.length > 0) {
          handleFiles(files);
        }
      });
    }
    
    // å¤„ç†é€‰æ‹©çš„æ–‡ä»¶
    function handleFiles(files) {
      // æ¸…ç©ºåŸæœ‰æ–‡ä»¶åˆ—è¡¨
      fileList.innerHTML = '';
      fileList.classList.remove('hidden');
      fileList.classList.add('show');
      
      // å¯ç”¨ä¸Šä¼ æŒ‰é’®
      batchUploadBtn.disabled = false;
      finalSubmitBtn.disabled = false;
      
      // éå†æ–‡ä»¶ç”Ÿæˆåˆ—è¡¨é¡¹
      Array.from(files).forEach((file, index) => {
        const fileSize = formatFileSize(file.size);
        const fileType = file.type.includes('pdf') ? 'file-pdf-o' : 
                         file.type.includes('image') ? 'file-image-o' : 'file-text-o';
        
        // åˆ›å»ºæ–‡ä»¶é¡¹
        const fileItem = document.createElement('div');
        fileItem.className = 'file-item flex items-center p-3 bg-gray-50 rounded-lg';
        fileItem.innerHTML = `
          <div class="w-8 h-8 rounded bg-primary/10 flex items-center justify-center text-primary mr-3">
            <i class="fa fa-${fileType}"></i>
          </div>
          <div class="flex-1 overflow-hidden">
            <p class="text-sm text-gray-800 truncate">${file.name}</p>
            <div class="w-full h-1.5 bg-gray-200 rounded-full mt-1">
              <div class="upload-progress h-1.5 bg-primary rounded-full" style="width: 0%"></div>
            </div>
            <p class="text-xs text-gray-500 mt-1 flex justify-between">
              <span>${fileSize} / 50MB</span>
              <span class="upload-percent">0%</span>
            </p>
          </div>
          <button class="remove-file-item ml-2 text-gray-400 hover:text-danger" data-index="${index}">
            <i class="fa fa-times"></i>
          </button>
        `;
        
        fileList.appendChild(fileItem);
        
        // ç§»é™¤æ–‡ä»¶é¡¹äº‹ä»¶
        fileItem.querySelector('.remove-file-item').addEventListener('click', function() {
          fileItem.remove();
          // æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æ–‡ä»¶
          if (fileList.children.length === 0) {
            fileList.classList.add('hidden');
            fileList.classList.remove('show');
            batchUploadBtn.disabled = true;
            finalSubmitBtn.disabled = true;
          }
        });
      });
    }
    
    // 5. æ‰¹é‡ä¸Šä¼ æŒ‰é’®é€»è¾‘ï¼ˆä»¿APPä¸Šä¼ è¿›åº¦ï¼‰
    if (batchUploadBtn) {
      batchUploadBtn.addEventListener('click', function() {
        // ç¦ç”¨ä¸Šä¼ æŒ‰é’®
        batchUploadBtn.disabled = true;
        batchUploadBtn.innerHTML = '<i class="fa fa-spinner fa-spin mr-1"></i> ä¸Šä¼ ä¸­...';
        
        // è·å–æ‰€æœ‰è¿›åº¦æ¡
        const progressBars = document.querySelectorAll('.upload-progress');
        const percentTexts = document.querySelectorAll('.upload-percent');
        let progress = 0;
        
        // æ¨¡æ‹Ÿä¸Šä¼ è¿›åº¦
        const progressInterval = setInterval(() => {
          progress += Math.floor(Math.random() * 5) + 1;
          if (progress > 100) progress = 100;
          
          // æ›´æ–°æ‰€æœ‰è¿›åº¦æ¡
          progressBars.forEach(bar => {
            bar.style.width = `${progress}%`;
          });
          
          // æ›´æ–°ç™¾åˆ†æ¯”
          percentTexts.forEach(text => {
            text.textContent = `${progress}%`;
          });
          
          // ä¸Šä¼ å®Œæˆ
          if (progress === 100) {
            clearInterval(progressInterval);
            batchUploadBtn.innerHTML = '<i class="fa fa-check mr-1"></i> ä¸Šä¼ å®Œæˆ';
            
            // 500msåæ˜¾ç¤ºæˆåŠŸå¼¹çª—
            setTimeout(() => {
              uploadSuccessModal.classList.remove('hidden');
            }, 500);
          }
        }, 200);
      });
    }
    
    // 6. ä¸Šä¼ æˆåŠŸç¡®è®¤é€»è¾‘
    if (successConfirmBtn) {
      successConfirmBtn.addEventListener('click', function() {
        uploadSuccessModal.classList.add('hidden');
        // è¿”å›æŠ¥å‘Šåˆ—è¡¨
        uploadReportPage.classList.add('hidden');
        reportPage.classList.remove('hidden');
        document.getElementById('page-title').textContent = 'èº«ä½“æŠ¥å‘Š';
        document.querySelector('main').scrollTop = 0;
        
        // é‡ç½®ä¸Šä¼ çŠ¶æ€
        fileList.innerHTML = '';
        fileList.classList.add('hidden');
        fileList.classList.remove('show');
        batchUploadBtn.disabled = true;
        finalSubmitBtn.disabled = true;
        batchUploadBtn.innerHTML = '<i class="fa fa-upload mr-1"></i> å¼€å§‹ä¸Šä¼ ';
        newFileUpload.value = '';
      });
    }
    
    // 7. æœ€ç»ˆæäº¤æŒ‰é’®é€»è¾‘ï¼ˆå®Œæ•´æµç¨‹ï¼‰
    if (finalSubmitBtn) {
      finalSubmitBtn.addEventListener('click', function() {
        // æ£€æŸ¥å¿…å¡«é¡¹
        const reportType = document.querySelector('select').value;
        const checkDate = document.querySelector('input[type="date"]').value;
        const hospital = document.querySelector('input[type="text"][placeholder="è¯·è¾“å…¥åŒ»é™¢/ä½“æ£€ä¸­å¿ƒåç§°"]').value;
        
        if (!reportType) {
          alert('è¯·é€‰æ‹©æŠ¥å‘Šç±»å‹');
          return;
        }
        if (!checkDate) {
          alert('è¯·é€‰æ‹©æ£€æŸ¥æ—¥æœŸ');
          return;
        }
        if (!hospital) {
          alert('è¯·è¾“å…¥æ£€æŸ¥æœºæ„åç§°');
          return;
        }
        
        // æ‰§è¡Œä¸Šä¼ 
        batchUploadBtn.click();
      });
    }
    
    // å·¥å…·å‡½æ•°ï¼šæ ¼å¼åŒ–æ–‡ä»¶å¤§å°
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
    }
    
    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    window.addEventListener('DOMContentLoaded', () => {
      // åˆå§‹åŒ–é¡µé¢æ˜¾ç¤ºçŠ¶æ€
      initPageDisplay();
      
      // ä¼˜åŒ–æ»šåŠ¨ä½“éªŒ
      const mainContent = document.querySelector('main');
      mainContent.style.scrollBehavior = 'smooth';
      
      // èŠå¤©è¾“å…¥æ¡†å›è½¦æäº¤
      document.getElementById('chat-input')?.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          document.getElementById('chat-form').dispatchEvent(new Event('submit'));
        }
      });
      
      // é˜»æ­¢å¼¹çª—å†…éƒ¨ç‚¹å‡»äº‹ä»¶å†’æ³¡
      document.querySelector('.report-modal-content')?.addEventListener('click', function(e) {
        e.stopPropagation();
      });
      
      // åˆå§‹åŒ–å¼¹çª—ä¸ºéšè—çŠ¶æ€
      reportModal.style.display = 'none';
      uploadSuccessModal.style.display = 'none';
      
      // è°ƒè¯•ä¿¡æ¯
      console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œåˆå§‹åŒ–ä¸ºç™»å½•é¡µé¢');
      console.log('ä¸Šä¼ æŠ¥å‘Šé¡µé¢å…ƒç´ :', uploadReportPage);
      console.log('åŒæ­¥æŠ¥å‘ŠæŒ‰é’®å…ƒç´ :', syncReportBtn);
      console.log('ä¸Šä¼ è¿”å›æŒ‰é’®å…ƒç´ :', uploadBackBtn);
      console.log('ä¸Šä¼ é¡µé¢HTMLç»“æ„:', uploadReportPage?.innerHTML?.substring(0, 500));
    });
  </script>
</body>
</html>